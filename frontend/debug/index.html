<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnyBank Debug Control Plane</title>

    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        slate: {
                            850: '#1a2332',
                            900: '#0f172a',
                            950: '#0a0f1a'
                        }
                    },
                    fontFamily: {
                        mono: ['JetBrains Mono', 'Fira Code', 'Monaco', 'Consolas', 'monospace']
                    }
                }
            }
        }
    </script>

    <!-- Debug styles -->
    <link rel="stylesheet" href="css/debug-styles.css">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- JSON syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/json.min.js"></script>
</head>
<body class="bg-slate-900 text-slate-100 min-h-screen font-sans">
    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 h-14 bg-slate-800 border-b border-slate-700 z-50 flex items-center px-4">
        <div class="flex items-center gap-3">
            <span class="text-xl">&#128295;</span>
            <h1 class="text-lg font-semibold text-slate-100">AnyBank Debug Control Plane</h1>
        </div>
        <div class="flex items-center gap-3 ml-6">
            <span id="env-badge" class="px-2 py-1 text-xs font-medium rounded bg-amber-500/20 text-amber-400 border border-amber-500/30">
                LOCAL
            </span>
            <span id="version-badge" class="px-2 py-1 text-xs font-medium rounded bg-slate-700 text-slate-400">
                v0.1.0
            </span>
        </div>
        <div class="ml-auto flex items-center gap-4">
            <div id="connection-status" class="flex items-center gap-2 text-sm">
                <span class="w-2 h-2 rounded-full bg-red-500"></span>
                <span class="text-slate-400">Disconnected</span>
            </div>
            <button id="clear-all-btn" class="px-3 py-1.5 text-sm font-medium rounded bg-slate-700 hover:bg-slate-600 text-slate-300 transition-colors">
                Clear All
            </button>
        </div>
    </header>

    <!-- Main layout container -->
    <div class="pt-14 h-screen flex">
        <!-- Sidebar -->
        <aside id="sidebar" class="w-60 bg-slate-850 border-r border-slate-700 overflow-y-auto flex-shrink-0">
            <nav id="sidebar-nav" class="py-4">
                <!-- Navigation groups will be rendered by sidebar.js -->
            </nav>
        </aside>

        <!-- Main content area -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Main panel -->
            <main id="main-content" class="flex-1 overflow-y-auto p-6">
                <!-- Content will be rendered by router -->
                <div class="flex items-center justify-center h-full text-slate-500">
                    <div class="text-center">
                        <div class="text-6xl mb-4">&#128295;</div>
                        <h2 class="text-xl font-medium text-slate-400">Debug Control Plane</h2>
                        <p class="text-sm mt-2">Select a section from the sidebar to get started</p>
                    </div>
                </div>
            </main>

            <!-- Bottom panel (Live Events) -->
            <div id="bottom-panel" class="h-52 bg-slate-850 border-t border-slate-700 flex flex-col">
                <div class="flex items-center justify-between px-4 py-2 border-b border-slate-700">
                    <div class="flex items-center gap-3">
                        <span class="text-sm font-medium text-slate-300">Live Events</span>
                        <span id="event-count" class="px-2 py-0.5 text-xs rounded bg-slate-700 text-slate-400">0</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <select id="event-filter" class="px-2 py-1 text-xs rounded bg-slate-700 border border-slate-600 text-slate-300">
                            <option value="all">All Events</option>
                            <option value="user-only">User Traffic Only</option>
                            <option value="test-only">Test Traffic Only</option>
                            <option value="UI">UI Events</option>
                            <option value="API">API Events</option>
                            <option value="OPA">OPA Events</option>
                            <option value="DB">DB Events</option>
                            <option value="AUTH">Auth Events</option>
                            <option value="TOKEN">Token Events</option>
                            <option value="AUDIT">Audit Events</option>
                            <option value="ERROR">Errors</option>
                        </select>
                        <button id="pause-events-btn" class="px-2 py-1 text-xs rounded bg-slate-700 hover:bg-slate-600 text-slate-300 transition-colors">
                            Pause
                        </button>
                        <button id="clear-events-btn" class="px-2 py-1 text-xs rounded bg-slate-700 hover:bg-slate-600 text-slate-300 transition-colors">
                            Clear
                        </button>
                        <button id="export-events-btn" class="px-2 py-1 text-xs rounded bg-slate-700 hover:bg-slate-600 text-slate-300 transition-colors">
                            Export
                        </button>
                        <button id="toggle-panel-btn" class="px-2 py-1 text-xs rounded bg-slate-700 hover:bg-slate-600 text-slate-300 transition-colors">
                            Collapse
                        </button>
                    </div>
                </div>
                <div id="events-container" class="flex-1 overflow-y-auto font-mono text-xs">
                    <!-- Events will be rendered by live-events.js -->
                </div>
            </div>
        </div>
    </div>

    <!-- Slide-over panel for details -->
    <div id="slide-over" class="fixed top-14 bottom-0 right-0 w-[600px] bg-slate-800 border-l border-slate-700 transform translate-x-full transition-transform duration-300 z-40 hidden">
        <div class="h-full flex flex-col">
            <div class="flex items-center gap-3 px-4 py-3 border-b-2 border-slate-600 bg-slate-900">
                <button id="close-slide-over" class="flex items-center gap-2 px-3 py-2 rounded-lg bg-red-600 hover:bg-red-500 text-white font-medium transition-colors" title="Close (Esc)">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                    <span>Close</span>
                </button>
                <h3 id="slide-over-title" class="text-sm font-medium text-slate-200">Details</h3>
            </div>
            <div id="slide-over-content" class="flex-1 overflow-y-auto p-4">
                <!-- Content will be rendered dynamically -->
            </div>
        </div>
    </div>

    <!-- Modal container -->
    <div id="modal-container"></div>

    <!-- Toast container -->
    <div id="toast-container" class="fixed bottom-4 right-4 z-50 space-y-2"></div>

    <!-- Application modules -->
    <script type="module" src="js/main.js"></script>
</body>
</html>
